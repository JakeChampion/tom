<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>TOML parser</title>

    <link rel="stylesheet" href="normalize.min.css">

    <style>
      html {
        box-sizing: border-box;
      }
      *, *:before, *:after {
        box-sizing: inherit;
      }

      .container {
        border-radius: 5px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        min-height: 100vh;
        padding: 1rem;
        column-gap: 1rem;
      }

      .code-area {
        font-family: monospace;
        resize: none;
        width: 100%;
        height: 100%;
      }
    </style>

    <script src='./main.js'></script>
    <script>
      const { parse } = wasm_bindgen;
      function run() {
        const source = document.querySelector("#toml");
        const target = document.querySelector("#tree");
        const update = () => {
          const text = source.value;
          target.value = parse(text);
        };
        source.oninput = update;
        update();
      }
      wasm_bindgen('./main_bg.wasm').then(run);
    </script>
  </head>
  <body>

  <div class="container">
    <div class="pane">
      <textarea id="toml" class="code-area" placeholder="Enter TOML here" autofocus>
# This is a TOML document.

title = "TOML Example"

[owner]
name = "Tom Preston-Werner"
dob = 1979-05-27T07:32:00-08:00 # First class dates
      </textarea>
    </div>
    <div class="pane">
      <textarea id="tree" class="code-area" readonly>
      </textarea>
    </div>
  </div>
  </body>
</html>
